{"ast":null,"code":"var _jsxFileName = \"/home/sergey/Documents/own_project/MVP/mvp-crash-course/src/containers/loginPage/index.js\";\nimport React, { Component } from 'react';\nimport Joi from \"joi-browser\";\nimport config from '../../config';\nimport './style.css';\n\nclass LoginPage extends Component {\n  constructor(props) {\n    super(props);\n    this.schema = {\n      login: Joi.string().required()\n    };\n\n    this.validate = () => {\n      const options = {\n        abortEarly: false\n      };\n      const data = {\n        login: this.state.login\n      };\n      let {\n        error\n      } = Joi.validate(data, this.schema, options);\n\n      if (error) {\n        this.setState({\n          error: error.details[0]\n        });\n        return error;\n      }\n    };\n\n    this.handleLoginChange = e => {\n      this.setState({\n        login: e.target.value\n      });\n    };\n\n    this.handleSubmit = async e => {\n      e.preventDefault();\n      const {\n        auth_url,\n        client_id,\n        redirect_url\n      } = config.github;\n      const {\n        login\n      } = this.state;\n      const error = this.validate();\n      if (error) return;\n      window.location.replace(`${auth_url}?client_id=${client_id}&login=${login}&redirect_uri=${redirect_url}`);\n    };\n\n    this.state = {\n      login: null,\n      error: null\n    };\n  }\n\n  render() {\n    const {\n      error\n    } = this.state;\n    console.log(JSON.stringify(error));\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login-box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }\n    }, \"Please input your GitHub login\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      onChange: this.handleLoginChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }\n    }, \"Sign In\"));\n  }\n\n}\n\n;\nexport default LoginPage;","map":{"version":3,"sources":["/home/sergey/Documents/own_project/MVP/mvp-crash-course/src/containers/loginPage/index.js"],"names":["React","Component","Joi","config","LoginPage","constructor","props","schema","login","string","required","validate","options","abortEarly","data","state","error","setState","details","handleLoginChange","e","target","value","handleSubmit","preventDefault","auth_url","client_id","redirect_url","github","window","location","replace","render","console","log","JSON","stringify"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,OAAOC,MAAP,MAAmB,cAAnB;AAEA,OAAO,aAAP;;AAEA,MAAMC,SAAN,SAAwBH,SAAxB,CAAkC;AAChCI,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AADiB,SAQnBC,MARmB,GAQV;AACPC,MAAAA,KAAK,EAAEN,GAAG,CAACO,MAAJ,GAAaC,QAAb;AADA,KARU;;AAAA,SAYnBC,QAZmB,GAYR,MAAM;AACf,YAAMC,OAAO,GAAG;AAAEC,QAAAA,UAAU,EAAE;AAAd,OAAhB;AACA,YAAMC,IAAI,GAAG;AACXN,QAAAA,KAAK,EAAE,KAAKO,KAAL,CAAWP;AADP,OAAb;AAGA,UAAI;AAAEQ,QAAAA;AAAF,UAAYd,GAAG,CAACS,QAAJ,CAAaG,IAAb,EAAmB,KAAKP,MAAxB,EAAgCK,OAAhC,CAAhB;;AACA,UAAII,KAAJ,EAAW;AACT,aAAKC,QAAL,CAAc;AACZD,UAAAA,KAAK,EAAEA,KAAK,CAACE,OAAN,CAAc,CAAd;AADK,SAAd;AAIA,eAAOF,KAAP;AACD;AACF,KAzBkB;;AAAA,SA2BnBG,iBA3BmB,GA2BEC,CAAD,IAAO;AACzB,WAAKH,QAAL,CAAc;AACZT,QAAAA,KAAK,EAAEY,CAAC,CAACC,MAAF,CAASC;AADJ,OAAd;AAGD,KA/BkB;;AAAA,SAiCnBC,YAjCmB,GAiCJ,MAAOH,CAAP,IAAa;AAC1BA,MAAAA,CAAC,CAACI,cAAF;AAEA,YAAM;AAAEC,QAAAA,QAAF;AAAYC,QAAAA,SAAZ;AAAuBC,QAAAA;AAAvB,UAAwCxB,MAAM,CAACyB,MAArD;AACA,YAAM;AAAEpB,QAAAA;AAAF,UAAY,KAAKO,KAAvB;AAEA,YAAMC,KAAK,GAAG,KAAKL,QAAL,EAAd;AACA,UAAIK,KAAJ,EAAW;AAEXa,MAAAA,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAyB,GAAEN,QAAS,cAAaC,SAAU,UAASlB,KAAM,iBAAgBmB,YAAa,EAAvG;AACD,KA3CkB;;AAEjB,SAAKZ,KAAL,GAAa;AACXP,MAAAA,KAAK,EAAE,IADI;AAEXQ,MAAAA,KAAK,EAAE;AAFI,KAAb;AAID;;AAuCDgB,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEhB,MAAAA;AAAF,QAAY,KAAKD,KAAvB;AAEAkB,IAAAA,OAAO,CAACC,GAAR,CAAYC,IAAI,CAACC,SAAL,CAAepB,KAAf,CAAZ;AAEA,wBACE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCADF,eAEE;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,QAAQ,EAAE,KAAKG,iBAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,eAGE;AAAQ,MAAA,OAAO,EAAE,KAAKI,YAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAHF,CADF;AAOD;;AA1D+B;;AA2DjC;AAED,eAAenB,SAAf","sourcesContent":["import React, { Component } from 'react';\nimport Joi from \"joi-browser\";\nimport config from '../../config';\n\nimport './style.css';\n\nclass LoginPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      login: null,\n      error: null\n    }\n  }\n\n  schema = {\n    login: Joi.string().required()\n  }\n\n  validate = () => {\n    const options = { abortEarly: false };\n    const data = {\n      login: this.state.login\n    };\n    let { error } = Joi.validate(data, this.schema, options);\n    if (error) {\n      this.setState({\n        error: error.details[0]\n      });\n\n      return error;\n    }\n  }\n  \n  handleLoginChange = (e) => {\n    this.setState({\n      login: e.target.value\n    });\n  }\n  \n  handleSubmit = async (e) => {\n    e.preventDefault();\n\n    const { auth_url, client_id, redirect_url } = config.github;\n    const { login } = this.state\n\n    const error = this.validate();\n    if (error) return;\n\n    window.location.replace(`${auth_url}?client_id=${client_id}&login=${login}&redirect_uri=${redirect_url}`);\n  }\n\n  render() {\n    const { error } = this.state;\n\n    console.log(JSON.stringify(error));\n    \n    return (\n      <div className=\"login-box\">\n        <p>Please input your GitHub login</p>\n        <input type=\"text\" onChange={this.handleLoginChange}></input>\n        <button onClick={this.handleSubmit}>Sign In</button>\n      </div>\n    )\n  }\n};\n\nexport default LoginPage;"]},"metadata":{},"sourceType":"module"}