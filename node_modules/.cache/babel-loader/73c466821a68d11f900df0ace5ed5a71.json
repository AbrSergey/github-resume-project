{"ast":null,"code":"import axios from 'axios';\nimport config from '../config';\nconst backend = axios.create({\n  baseURL: `${config.backend.host}/api/resume`\n});\nconst gitHubBackendAuth = axios.create({\n  baseURL: 'https://github.com'\n});\nconst gitHubBackend = axios.create({\n  baseURL: config.github.base_url\n});\nexport const socialLinksGet = () => backend.get('/social_links');\nexport const generalInformationGet = () => backend.get('/general_information');\nexport const skillsGet = () => backend.get('/skills');\nexport const educationGet = () => backend.get('/education'); // export const authorize = (username) => gitHubBackendAuth.get(`/login/oauth/authorize?login=${username}&client_id=${config.client_id}`);\n\nexport const getAccessToken = async code => {\n  const {\n    client_id,\n    client_secret\n  } = config.github;\n  const {\n    data\n  } = await backend.post('/token', {\n    code,\n    client_id,\n    client_secret\n  });\n\n  if (data.indexOf('access_token=') !== -1) {\n    const access_token = data.substring('access_token='.length, data.indexOf('&scope='));\n    localStorage.setItem('access_token', access_token);\n    localStorage.setItem('isTokenPresented', true);\n    return null;\n  } else return data;\n};\nexport const userInfo = () => gitHubBackend.get('/user');\ngitHubBackend.interceptors.request.use(config => {\n  const accessToken = localStorage.getItem('access_token');\n  config.headers.Authorization = `Bearer ${accessToken}`;\n  return config;\n});","map":{"version":3,"sources":["/home/sergey/Documents/own_project/MVP/mvp-crash-course/src/services/backend.js"],"names":["axios","config","backend","create","baseURL","host","gitHubBackendAuth","gitHubBackend","github","base_url","socialLinksGet","get","generalInformationGet","skillsGet","educationGet","getAccessToken","code","client_id","client_secret","data","post","indexOf","access_token","substring","length","localStorage","setItem","userInfo","interceptors","request","use","accessToken","getItem","headers","Authorization"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AAEA,MAAMC,OAAO,GAAGF,KAAK,CAACG,MAAN,CAAa;AAAEC,EAAAA,OAAO,EAAG,GAAEH,MAAM,CAACC,OAAP,CAAeG,IAAK;AAAlC,CAAb,CAAhB;AACA,MAAMC,iBAAiB,GAAGN,KAAK,CAACG,MAAN,CAAa;AAAEC,EAAAA,OAAO,EAAE;AAAX,CAAb,CAA1B;AACA,MAAMG,aAAa,GAAGP,KAAK,CAACG,MAAN,CAAa;AAAEC,EAAAA,OAAO,EAAEH,MAAM,CAACO,MAAP,CAAcC;AAAzB,CAAb,CAAtB;AAEA,OAAO,MAAMC,cAAc,GAAG,MAAMR,OAAO,CAACS,GAAR,CAAY,eAAZ,CAA7B;AACP,OAAO,MAAMC,qBAAqB,GAAG,MAAMV,OAAO,CAACS,GAAR,CAAY,sBAAZ,CAApC;AACP,OAAO,MAAME,SAAS,GAAG,MAAMX,OAAO,CAACS,GAAR,CAAY,SAAZ,CAAxB;AACP,OAAO,MAAMG,YAAY,GAAG,MAAMZ,OAAO,CAACS,GAAR,CAAY,YAAZ,CAA3B,C,CAEP;;AACA,OAAO,MAAMI,cAAc,GAAG,MAAOC,IAAP,IAAgB;AAC5C,QAAM;AAAEC,IAAAA,SAAF;AAAaC,IAAAA;AAAb,MAA+BjB,MAAM,CAACO,MAA5C;AACA,QAAM;AAAEW,IAAAA;AAAF,MAAW,MAAMjB,OAAO,CAACkB,IAAR,CAAa,QAAb,EAAuB;AAC5CJ,IAAAA,IAD4C;AACtCC,IAAAA,SADsC;AAC3BC,IAAAA;AAD2B,GAAvB,CAAvB;;AAIA,MAAIC,IAAI,CAACE,OAAL,CAAa,eAAb,MAAkC,CAAC,CAAvC,EAA0C;AACxC,UAAMC,YAAY,GAAGH,IAAI,CAACI,SAAL,CAAe,gBAAgBC,MAA/B,EAAuCL,IAAI,CAACE,OAAL,CAAa,SAAb,CAAvC,CAArB;AACAI,IAAAA,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqCJ,YAArC;AACAG,IAAAA,YAAY,CAACC,OAAb,CAAqB,kBAArB,EAAyC,IAAzC;AACA,WAAO,IAAP;AACD,GALD,MAMK,OAAOP,IAAP;AACN,CAbM;AAeP,OAAO,MAAMQ,QAAQ,GAAG,MAAMpB,aAAa,CAACI,GAAd,CAAkB,OAAlB,CAAvB;AAEPJ,aAAa,CAACqB,YAAd,CAA2BC,OAA3B,CAAmCC,GAAnC,CAAwC7B,MAAD,IAAY;AACjD,QAAM8B,WAAW,GAAGN,YAAY,CAACO,OAAb,CAAqB,cAArB,CAApB;AACA/B,EAAAA,MAAM,CAACgC,OAAP,CAAeC,aAAf,GAAgC,UAASH,WAAY,EAArD;AACA,SAAO9B,MAAP;AACD,CAJD","sourcesContent":["import axios from 'axios';\nimport config from '../config';\n\nconst backend = axios.create({ baseURL: `${config.backend.host}/api/resume` });\nconst gitHubBackendAuth = axios.create({ baseURL: 'https://github.com' });\nconst gitHubBackend = axios.create({ baseURL: config.github.base_url });\n\nexport const socialLinksGet = () => backend.get('/social_links');\nexport const generalInformationGet = () => backend.get('/general_information');\nexport const skillsGet = () => backend.get('/skills');\nexport const educationGet = () => backend.get('/education');\n\n// export const authorize = (username) => gitHubBackendAuth.get(`/login/oauth/authorize?login=${username}&client_id=${config.client_id}`);\nexport const getAccessToken = async (code) => {\n  const { client_id, client_secret } = config.github;\n  const { data } = await backend.post('/token', {\n    code, client_id, client_secret\n  });\n\n  if (data.indexOf('access_token=') !== -1) {\n    const access_token = data.substring('access_token='.length, data.indexOf('&scope='));\n    localStorage.setItem('access_token', access_token);\n    localStorage.setItem('isTokenPresented', true);\n    return null;\n  }\n  else return data;\n}\n\nexport const userInfo = () => gitHubBackend.get('/user');\n\ngitHubBackend.interceptors.request.use((config) => {\n  const accessToken = localStorage.getItem('access_token');\n  config.headers.Authorization = `Bearer ${accessToken}`;\n  return config;\n});"]},"metadata":{},"sourceType":"module"}